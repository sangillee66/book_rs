[
  {
    "objectID": "2_3_radar_lidar.html",
    "href": "2_3_radar_lidar.html",
    "title": "\n6  레이더와 라이다 시스템\n",
    "section": "",
    "text": "6.1 LiDAR 데이터 분석\n필수적인 패키지를 설치한다.\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(terra)\nlibrary(tmap)\nlibrary(RStoolbox)\nlibrary(lidR)\nlibrary(raster)\nlibrary(rayshader)\n수업의 특강에서 이하은이 수집한 las 파일을 불러온다.\nlas &lt;- readLAS(\"D:/My R/Raster Data Manipulation Korea/lidar_data/snu_lidar/lidars/terra_las/cloud_merged.las\")\nlas_check(las)\n시각화한다.\nplot(las, color = \"ScanAngleRank\", bg = \"white\", axis = TRUE, legend = TRUE)\n그라운드(ground) 포인트를 추출한다.\nlas &lt;- readLAS(\"D:/My R/Raster Data Manipulation Korea/lidar_data/snu_lidar/lidars/terra_las/cloud850fccd1a896259f.las\", select = \"xyzrn\")\nlas &lt;- classify_ground(las, algorithm = pmf(ws = 5, th = 3))\nDTM을 생성한다.\ndtm_idw &lt;- rasterize_terrain(las, algorithm = knnidw(k = 10L, p = 2))\nplot_dtm3d(dtm_idw, bg = \"white\")\nDTM을 시각화한다.\ndtm_prod &lt;- terrain(dtm_idw, v = c(\"slope\", \"aspect\"), unit = \"radians\")\ndtm_hillshade &lt;- shade(slope = dtm_prod$slope, aspect = dtm_prod$aspect)\nterra::plot(dtm_hillshade, col = gray(0:30/30), legend = FALSE)\nrayshader 패키지를 활용하여 시각화한다.\ndtm &lt;- rasterize_terrain(las, algorithm = tin())\ndtm &lt;- raster(dtm)\nelmat &lt;- raster_to_matrix(dtm)\nmap &lt;- elmat |&gt; \n  sphere_shade(texture = \"imhof1\", progbar = FALSE) |&gt; \n  add_water(detect_water(elmat), color = \"imhof1\") |&gt;\n  add_shadow(ray_shade(elmat, progbar = FALSE), 0.5) |&gt;\n  add_shadow(ambient_shade(elmat, progbar = FALSE), 0)\n2D 플롯을 생성한다.\nplot_map(map)\n3D 플롯을 생성한다.\nplot_3d(map, elmat, zscale = 1, windowsize = c(800, 800))",
    "crumbs": [
      "RS 데이터의 획득",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>레이더와 라이다 시스템</span>"
    ]
  },
  {
    "objectID": "4_2_image_composite.html",
    "href": "4_2_image_composite.html",
    "title": "\n13  영상 합성\n",
    "section": "",
    "text": "13.1 고해상도 컬러 영상 합성\n필수적인 패키지를 설치한다.\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(tmap)\nlibrary(terra)\nlibrary(RStoolbox)\n서울의 행정구역 바운더리 파일을 불러온다.\nseoul &lt;- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_SIDO_2023_2Q.shp\")\nseoul_gu &lt;- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_GU_2023_2Q.shp\")\nseoul_dong &lt;- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_EMD_2023_2Q.shp\")\nLevel-1 데이터를 불러와 마스킹한다.\nlevel1_landsat_seoul_st_30 &lt;- rast(\"D:/My R/World Data Manupulation/USGS EarthExplorer/level1_landsat_seoul_stack_30_2024.tif\")\nlevel1_landsat_seoul_st_30_mask &lt;- level1_landsat_seoul_st_30 |&gt; \n  mask(seoul)\nlevel1_landsat_seoul_st_15 &lt;- rast(\"D:/My R/World Data Manupulation/USGS EarthExplorer/level1_landsat_seoul_stack_15_2024.tif\")\nlevel1_landsat_seoul_st_15_mask &lt;- level1_landsat_seoul_st_15 |&gt; \n  mask(seoul)\n대비확장을 시행한다.\nlevel1_landsat_seoul_st_30_mask_str &lt;- level1_landsat_seoul_st_30_mask |&gt; \n  stretch(minv = 0, maxv = 255, minq = 0.05, maxq = 0.95)\nlevel1_landsat_seoul_st_15_mask_str &lt;- level1_landsat_seoul_st_15_mask |&gt; \n  stretch(minv = 0, maxv = 255, minq = 0.05, maxq = 0.95)\npanchrom &lt;- level1_landsat_seoul_st_15_mask_str\n기본적인 천연컬러 영상을 생성한다.\nmy_map &lt;- tm_shape(level1_landsat_seoul_st_30_mask_str, \n                   raster.downsample = FALSE) + \n  tm_rgb(r = 4, g = 3, b = 2, legend.show = FALSE) +\n  tm_shape(seoul) + tm_borders(lwd = 2, col = \"gray20\") +\n  tm_layout(frame = TRUE, title = \"Natural Color\", \n            title.size = 2, title.position = c(\"left\", \"top\"), \n            bg.color = \"white\", \n            inner.margins = c(0.05, 0.05, 0.05, 0.05)) +\n  tm_scale_bar(color.dark = \"gray60\", position = c(0.01, 0.01), \n               text.size = 0.6, breaks = seq(0, 20, 5)) + \n  tm_credits(\"SANG-IL LEE, Geography Education at SNU, 2025\", \n             size = 0.7)\nmy_map",
    "crumbs": [
      "RS 데이터의 분석 및 모델링",
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>영상 합성</span>"
    ]
  },
  {
    "objectID": "4_2_image_composite.html#고해상도-컬러-영상-합성",
    "href": "4_2_image_composite.html#고해상도-컬러-영상-합성",
    "title": "\n13  영상 합성\n",
    "section": "",
    "text": "13.1.1 RGB-IHS 변환\nRStoolbox 패키지의 panSharpen() 함수를 이용하여 RGB-IHS 변환을 시행한다.\n\npanchrom &lt;- level1_landsat_seoul_st_15_mask_str\npan_ihs &lt;- panSharpen(\n  level1_landsat_seoul_st_30_mask_str, \n  panchrom, \n  r = 4, g = 3, b = 2,\n  method = \"ihs\"\n)\n\n변환의 결과를 지도로 나타낸다.\n\nmy_map &lt;- tm_shape(pan_ihs, \n                   raster.downsample = FALSE) + \n  tm_rgb(r = 3, g = 2, b = 1, legend.show = FALSE) +\n  tm_shape(seoul) + tm_borders(lwd = 2, col = \"gray20\") +\n  tm_layout(frame = TRUE, title = \"RGB-IHS Transformation\", \n            title.size = 2, title.position = c(\"left\", \"top\"), \n            bg.color = \"white\", \n            inner.margins = c(0.05, 0.05, 0.05, 0.05)) +\n  tm_scale_bar(color.dark = \"gray60\", position = c(0.01, 0.01), \n               text.size = 0.6, breaks = seq(0, 20, 5)) + \n  tm_credits(\"SANG-IL LEE, Geography Education at SNU, 2025\", \n             size = 0.7)\nmy_map\n\n\n13.1.2 브로비(Brovey) 변환\n브로비 변환을 실시한다.\n\npan_brovey &lt;- panSharpen(\n  level1_landsat_seoul_st_30_mask_str, \n  panchrom, \n  r = 4, g = 3, b = 2,\n  method = \"brovey\"\n)\n\n변환의 결과를 지도로 나타낸다.\n\nmy_map &lt;- tm_shape(pan_brovey, \n                   raster.downsample = FALSE) + \n  tm_rgb(r = 3, g = 2, b = 1, legend.show = FALSE) +\n  tm_shape(seoul) + tm_borders(lwd = 2, col = \"gray20\") +\n  tm_layout(frame = TRUE, title = \"Brovey Transformation\", \n            title.size = 2, title.position = c(\"left\", \"top\"), \n            bg.color = \"white\", \n            inner.margins = c(0.05, 0.05, 0.05, 0.05)) +\n  tm_scale_bar(color.dark = \"gray60\", position = c(0.01, 0.01), \n               text.size = 0.6, breaks = seq(0, 20, 5)) + \n  tm_credits(\"SANG-IL LEE, Geography Education at SNU, 2025\", \n             size = 0.7)\nmy_map\n\n\n13.1.3 PCA 변환\nPCA 변환을 실시한다.\n\npan_pca &lt;- panSharpen(\n  level1_landsat_seoul_st_30_mask_str, \n  panchrom, \n  method = \"pca\"\n)\n\n변환의 결과를 지도로 나타낸다.\n\nmy_map &lt;- tm_shape(pan_pca, \n                   raster.downsample = FALSE) + \n  tm_rgb(r = 4, g = 3, b = 2, legend.show = FALSE) +\n  tm_shape(seoul) + tm_borders(lwd = 2, col = \"gray20\") +\n  tm_layout(frame = TRUE, title = \"PCA Transformation\", \n            title.size = 2, title.position = c(\"left\", \"top\"), \n            bg.color = \"white\", \n            inner.margins = c(0.05, 0.05, 0.05, 0.05)) +\n  tm_scale_bar(color.dark = \"gray60\", position = c(0.01, 0.01), \n               text.size = 0.6, breaks = seq(0, 20, 5)) + \n  tm_credits(\"SANG-IL LEE, Geography Education at SNU, 2025\", \n             size = 0.7)\nmy_map",
    "crumbs": [
      "RS 데이터의 분석 및 모델링",
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>영상 합성</span>"
    ]
  },
  {
    "objectID": "4_2_image_composite.html#시계열-영상-합성",
    "href": "4_2_image_composite.html#시계열-영상-합성",
    "title": "\n13  영상 합성\n",
    "section": "\n13.2 시계열 영상 합성",
    "text": "13.2 시계열 영상 합성",
    "crumbs": [
      "RS 데이터의 분석 및 모델링",
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>영상 합성</span>"
    ]
  },
  {
    "objectID": "4_2_image_composite.html#이종-센서-데이터의-융합",
    "href": "4_2_image_composite.html#이종-센서-데이터의-융합",
    "title": "\n13  영상 합성\n",
    "section": "\n13.3 이종 센서 데이터의 융합",
    "text": "13.3 이종 센서 데이터의 융합",
    "crumbs": [
      "RS 데이터의 분석 및 모델링",
      "<span class='chapter-number'>13</span>  <span class='chapter-title'>영상 합성</span>"
    ]
  },
  {
    "objectID": "4_3_image_classification.html",
    "href": "4_3_image_classification.html",
    "title": "\n14  영상 분류\n",
    "section": "",
    "text": "14.1 개요\n필수적인 패키지를 불러온다.\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(terra)\nlibrary(tmap)\nlibrary(RStoolbox)\n# library(randomForest)\n# library(kernlab)\n# library(RSNNS)\n# library(C50)\n예제 데이터를 불러온다.\ntrain &lt;- readRDS(system.file(\"external/trainingPolygons_lsat.rds\", package=\"RStoolbox\"))\nlsat_str &lt;- lsat |&gt; \n  stretch(minv = 0, maxv = 255, minq = 0.05, maxq = 0.95)\n\nmy_map &lt;- tm_shape(lsat_str) + tm_rgb(r = 3, g =2, b =1) +\n  tm_layout(legend.outside = TRUE)\nmy_map",
    "crumbs": [
      "RS 데이터의 분석 및 모델링",
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>영상 분류</span>"
    ]
  },
  {
    "objectID": "4_3_image_classification.html#감독-분류",
    "href": "4_3_image_classification.html#감독-분류",
    "title": "\n14  영상 분류\n",
    "section": "\n14.2 감독 분류",
    "text": "14.2 감독 분류\n훈련 데이터를 불러온다.\n\nmy_map &lt;- tm_shape(lsat_str) + \n  tm_rgb(r = 3, g =2, b =1) +\n  tm_shape(train) + \n  tm_polygons(col = \"class\", \n              palette = c(\"yellow\", \"sandybrown\", \"darkgreen\", \"blue\")) +\n  tm_layout(legend.outside = TRUE)\nmy_map\n\n\n\n\n\n\n\n최대 우도(maximum likelihood) 분류 알고리즘을 적용하여 감독 분류를 실행한다.\n\nsc_mlc &lt;- superClass(\n  lsat, \n  trainData = train, \n  responseCol = \"class\",\n  model = \"mlc\", \n  tuneLength = 1, trainPartition = 0.7\n  )\n\nsc_mlc$modelFit\n\n[[1]]\n  TrainAccuracy TrainKappa method\n1     0.9977143   0.996428 custom\n\n[[2]]\nCross-Validated (5 fold) Confusion Matrix \n\n(entries are average cell counts across resamples)\n \n            Reference\nPrediction   cleared fallen_dry forest water\n  cleared      147.8        0.0    0.4   0.0\n  fallen_dry     0.0       23.0    0.2   0.2\n  forest         0.4        0.0  260.6   0.0\n  water          0.0        0.0    0.0  92.0\n                            \n Accuracy (average) : 0.9977\n\nsc_mlc$validation$performance\n\nConfusion Matrix and Statistics\n\n            Reference\nPrediction   cleared fallen_dry forest water\n  cleared        192          0      1     0\n  fallen_dry       0          9      0     0\n  forest           1          0    526     0\n  water            0          0      0   139\n\nOverall Statistics\n                                          \n               Accuracy : 0.9977          \n                 95% CI : (0.9917, 0.9997)\n    No Information Rate : 0.6071          \n    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       \n                                          \n                  Kappa : 0.9959          \n                                          \n Mcnemar's Test P-Value : NA              \n\nStatistics by Class:\n\n                     Class: cleared Class: fallen_dry Class: forest\nSensitivity                  0.9948           1.00000        0.9981\nSpecificity                  0.9985           1.00000        0.9971\nPos Pred Value               0.9948           1.00000        0.9981\nNeg Pred Value               0.9985           1.00000        0.9971\nPrevalence                   0.2224           0.01037        0.6071\nDetection Rate               0.2212           0.01037        0.6060\nDetection Prevalence         0.2224           0.01037        0.6071\nBalanced Accuracy            0.9967           1.00000        0.9976\n                     Class: water\nSensitivity                1.0000\nSpecificity                1.0000\nPos Pred Value             1.0000\nNeg Pred Value             1.0000\nPrevalence                 0.1601\nDetection Rate             0.1601\nDetection Prevalence       0.1601\nBalanced Accuracy          1.0000\n\n\n결과를 지도를 제작한다.\n\nr &lt;- as.factor(sc_mlc$map)\nlevels(r) &lt;- data.frame(ID = 1:4, class_supervised = levels(train$class))\n\ntm_shape(r) + tm_raster(\n  palette = c(\"yellow\", \"sandybrown\", \"darkgreen\", \"blue\"), \n  title = \"Supervised: \\n Maximum Likelihood\") +\n  tm_layout(legend.outside = TRUE)",
    "crumbs": [
      "RS 데이터의 분석 및 모델링",
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>영상 분류</span>"
    ]
  },
  {
    "objectID": "4_3_image_classification.html#무감독-분류",
    "href": "4_3_image_classification.html#무감독-분류",
    "title": "\n14  영상 분류\n",
    "section": "\n14.3 무감독 분류",
    "text": "14.3 무감독 분류\nk-평균 분류법을 적용한다. 우선 클래스의 개수를 3개로 한 무감독 분류를 실행한다.\n\nuc &lt;- unsuperClass(lsat, nClasses = 3)\nuc_r &lt;- as.factor(uc$map)\ntm_shape(uc_r) + \n  tm_raster(palette = \"Set1\", title = \"Classes\") +\n  tm_layout(legend.outside = TRUE, \n            title = \"K-Means Clustering: \\n3 Classes\")\n\n\n\n\n\n\n\n클래스 개수를 4개로 한다.\n\nuc &lt;- unsuperClass(lsat, nClasses = 4)\nuc_r &lt;- as.factor(uc$map)\ntm_shape(uc_r) + tm_raster(palette = \"Set1\", title = \"Classes\") +\n  tm_layout(legend.outside = TRUE, title = \"K-Means Clustering: \\n4 Classes\")\n\n\n\n\n\n\n\n클래스 개수를 5개로 한다.\n\nuc &lt;- unsuperClass(lsat, nClasses = 5)\nuc_r &lt;- as.factor(uc$map)\ntm_shape(uc_r) + tm_raster(palette = \"Set1\", title = \"Classes\") +\n  tm_layout(\n    legend.outside = TRUE, \n    title = \"K-Means Clustering: \\n5 Classes\")",
    "crumbs": [
      "RS 데이터의 분석 및 모델링",
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>영상 분류</span>"
    ]
  },
  {
    "objectID": "4_3_image_classification.html#혼합-분류",
    "href": "4_3_image_classification.html#혼합-분류",
    "title": "\n14  영상 분류\n",
    "section": "\n14.4 혼합 분류",
    "text": "14.4 혼합 분류",
    "crumbs": [
      "RS 데이터의 분석 및 모델링",
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>영상 분류</span>"
    ]
  },
  {
    "objectID": "4_3_image_classification.html#분광혼합분석",
    "href": "4_3_image_classification.html#분광혼합분석",
    "title": "\n14  영상 분류\n",
    "section": "\n14.5 분광혼합분석",
    "text": "14.5 분광혼합분석\nRStoolbox 패키지의 mesma() 함수를 활용하면 spectral unmixing이 가능하다.",
    "crumbs": [
      "RS 데이터의 분석 및 모델링",
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>영상 분류</span>"
    ]
  },
  {
    "objectID": "4_3_image_classification.html#객체-기반-분류",
    "href": "4_3_image_classification.html#객체-기반-분류",
    "title": "\n14  영상 분류\n",
    "section": "\n14.6 객체-기반 분류",
    "text": "14.6 객체-기반 분류",
    "crumbs": [
      "RS 데이터의 분석 및 모델링",
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>영상 분류</span>"
    ]
  },
  {
    "objectID": "4_3_image_classification.html#인공지능-기반-분류",
    "href": "4_3_image_classification.html#인공지능-기반-분류",
    "title": "\n14  영상 분류\n",
    "section": "\n14.7 인공지능-기반 분류",
    "text": "14.7 인공지능-기반 분류\n인공지능-기반 분류법은 모두 감독 분류이기 때문에 위의 최대 우도법과 마찬가지로 훈련 데이터가 필요하다.\n\n14.7.1 결정 트리(decision tree)\n결정 트리 알고리즘을 적용한다.\n\nsc_dt &lt;- superClass(\n  lsat, \n  trainData = train, \n  responseCol = \"class\",\n  model = \"C5.0\", \n  tuneLength = 1, \n  trainPartition = 0.7)\n\nsc_dt$modelFit\n\n[[1]]\n  TrainAccuracy TrainKappa method\n1     0.9977373  0.9963813   C5.0\n\n[[2]]\nCross-Validated (5 fold) Confusion Matrix \n\n(entries are average cell counts across resamples)\n \n            Reference\nPrediction   cleared fallen_dry forest water\n  cleared      151.6        0.0    0.2   0.0\n  fallen_dry     0.0       14.6    0.2   0.2\n  forest         0.6        0.0  271.0   0.0\n  water          0.0        0.0    0.0  92.0\n                            \n Accuracy (average) : 0.9977\n\nsc_dt$validation$performance\n\nConfusion Matrix and Statistics\n\n            Reference\nPrediction   cleared fallen_dry forest water\n  cleared        151          0      0     0\n  fallen_dry      18         51      2     0\n  forest           4          0    462     0\n  water            0          0      0   139\n\nOverall Statistics\n                                          \n               Accuracy : 0.971           \n                 95% CI : (0.9571, 0.9813)\n    No Information Rate : 0.5611          \n    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       \n                                          \n                  Kappa : 0.9526          \n                                          \n Mcnemar's Test P-Value : NA              \n\nStatistics by Class:\n\n                     Class: cleared Class: fallen_dry Class: forest\nSensitivity                  0.8728           1.00000        0.9957\nSpecificity                  1.0000           0.97423        0.9890\nPos Pred Value               1.0000           0.71831        0.9914\nNeg Pred Value               0.9675           1.00000        0.9945\nPrevalence                   0.2092           0.06167        0.5611\nDetection Rate               0.1826           0.06167        0.5586\nDetection Prevalence         0.1826           0.08585        0.5635\nBalanced Accuracy            0.9364           0.98711        0.9923\n                     Class: water\nSensitivity                1.0000\nSpecificity                1.0000\nPos Pred Value             1.0000\nNeg Pred Value             1.0000\nPrevalence                 0.1681\nDetection Rate             0.1681\nDetection Prevalence       0.1681\nBalanced Accuracy          1.0000\n\n\n분류 결과를 지도로 나타낸다.\n\nr &lt;- as.factor(sc_dt$map)\nlevels(r) &lt;- data.frame(ID = 1:4, class_supervised = levels(train$class))\n\ntm_shape(r) + tm_raster(\n  palette = c(\"yellow\", \"sandybrown\", \"darkgreen\", \"blue\"),\n  title = \"Classes\") +\n  tm_layout(\n    legend.outside = TRUE, \n    title = \"AI-based Classification: \\nDecision Tree\")\n\n\n\n\n\n\n\n\n14.7.2 랜덤 포레스트(random forest)\n랜덤 포레스트 알고리즘을 적용한다.\n\nsc_rf &lt;- superClass(\n  lsat, \n  trainData = train, \n  responseCol = \"class\",\n  model = \"rf\", \n  tuneLength = 1, \n  trainPartition = 0.7)\n\nsc_rf$modelFit\n\n[[1]]\n  TrainAccuracy TrainKappa method\n1     0.9991744  0.9986552     rf\n\n[[2]]\nCross-Validated (5 fold) Confusion Matrix \n\n(entries are average cell counts across resamples)\n \n            Reference\nPrediction   cleared fallen_dry forest water\n  cleared      106.0        0.0    0.0   0.0\n  fallen_dry     0.0       21.2    0.0   0.0\n  forest         0.4        0.0  265.0   0.0\n  water          0.0        0.0    0.0  92.2\n                            \n Accuracy (average) : 0.9992\n\nsc_rf$validation$performance\n\nConfusion Matrix and Statistics\n\n            Reference\nPrediction   cleared fallen_dry forest water\n  cleared        402          0      0     0\n  fallen_dry       0         18      0     0\n  forest           0          0    305     0\n  water            0          0      0   139\n\nOverall Statistics\n                                     \n               Accuracy : 1          \n                 95% CI : (0.9957, 1)\n    No Information Rate : 0.4653     \n    P-Value [Acc &gt; NIR] : &lt; 2.2e-16  \n                                     \n                  Kappa : 1          \n                                     \n Mcnemar's Test P-Value : NA         \n\nStatistics by Class:\n\n                     Class: cleared Class: fallen_dry Class: forest\nSensitivity                  1.0000           1.00000         1.000\nSpecificity                  1.0000           1.00000         1.000\nPos Pred Value               1.0000           1.00000         1.000\nNeg Pred Value               1.0000           1.00000         1.000\nPrevalence                   0.4653           0.02083         0.353\nDetection Rate               0.4653           0.02083         0.353\nDetection Prevalence         0.4653           0.02083         0.353\nBalanced Accuracy            1.0000           1.00000         1.000\n                     Class: water\nSensitivity                1.0000\nSpecificity                1.0000\nPos Pred Value             1.0000\nNeg Pred Value             1.0000\nPrevalence                 0.1609\nDetection Rate             0.1609\nDetection Prevalence       0.1609\nBalanced Accuracy          1.0000\n\n\n분류 결과를 지도로 나타낸다.\n\nr &lt;- as.factor(sc_rf$map)\nlevels(r) &lt;- data.frame(ID = 1:4, class_supervised = levels(train$class))\n\ntm_shape(r) + tm_raster(\n  palette = c(\"yellow\", \"sandybrown\", \"darkgreen\", \"blue\"),\n  title = \"Classes\") +\n  tm_layout(\n    legend.outside = TRUE, \n    title = \"AI-based Classification: \\n Random Forest\")\n\n\n\n\n\n\n\n\n14.7.3 스포트 벡터 머신(support vector machine)\n스포트 벡터 머신 알고리즘을 적용한다.\n\nsc_svm &lt;- superClass(\n  lsat, \n  trainData = train, \n  responseCol = \"class\",\n  model = \"svmRadial\", \n  tuneLength = 1, \n  trainPartition = 0.7)\n\nsc_svm$modelFit\n\n[[1]]\n  TrainAccuracy TrainKappa    method\n1     0.9992285  0.9987971 svmRadial\n\n[[2]]\nCross-Validated (5 fold) Confusion Matrix \n\n(entries are average cell counts across resamples)\n \n            Reference\nPrediction   cleared fallen_dry forest water\n  cleared      158.0        0.0    0.2   0.0\n  fallen_dry     0.0       18.2    0.0   0.0\n  forest         0.2        0.0  250.0   0.0\n  water          0.0        0.0    0.0  91.6\n                            \n Accuracy (average) : 0.9992\n\nsc_svm$validation$performance\n\nConfusion Matrix and Statistics\n\n            Reference\nPrediction   cleared fallen_dry forest water\n  cleared        141          1      0     0\n  fallen_dry       0         32      0     0\n  forest           2          0    645     0\n  water            0          0      0   142\n\nOverall Statistics\n                                          \n               Accuracy : 0.9969          \n                 95% CI : (0.9909, 0.9994)\n    No Information Rate : 0.6698          \n    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       \n                                          \n                  Kappa : 0.9938          \n                                          \n Mcnemar's Test P-Value : NA              \n\nStatistics by Class:\n\n                     Class: cleared Class: fallen_dry Class: forest\nSensitivity                  0.9860           0.96970        1.0000\nSpecificity                  0.9988           1.00000        0.9937\nPos Pred Value               0.9930           1.00000        0.9969\nNeg Pred Value               0.9976           0.99893        1.0000\nPrevalence                   0.1485           0.03427        0.6698\nDetection Rate               0.1464           0.03323        0.6698\nDetection Prevalence         0.1475           0.03323        0.6719\nBalanced Accuracy            0.9924           0.98485        0.9969\n                     Class: water\nSensitivity                1.0000\nSpecificity                1.0000\nPos Pred Value             1.0000\nNeg Pred Value             1.0000\nPrevalence                 0.1475\nDetection Rate             0.1475\nDetection Prevalence       0.1475\nBalanced Accuracy          1.0000\n\n\n결과를 지도로 나타낸다.\n\nr &lt;- as.factor(sc_svm$map)\nlevels(r) &lt;- data.frame(ID = 1:4, class_supervised = levels(train$class))\n\ntm_shape(r) + tm_raster(\n  palette = c(\"yellow\", \"sandybrown\", \"darkgreen\", \"blue\"),\n  title = \"Classes\") +\n  tm_layout(\n    legend.outside = TRUE, \n    title = \"AI-based Classification: \\n Support Vector Machine\")\n\n\n\n\n\n\n\n\n14.7.4 인공신경망(artificial neural network, ANN)\n인공신경망 알고리즘을 적용한다.\n\nsc_ann &lt;- superClass(\n  lsat, \n  trainData = train, \n  responseCol = \"class\",\n  model = \"nnet\", \n  tuneLength = 3, \n  trainPartition = 0.7,\n  verbose = FALSE,\n  trace = FALSE)\n\nsc_ann$modelFit\n\n[[1]]\n  TrainAccuracy TrainKappa method\n1     0.9954531   0.992775   nnet\n\n[[2]]\nCross-Validated (5 fold) Confusion Matrix \n\n(entries are average cell counts across resamples)\n \n            Reference\nPrediction   cleared fallen_dry forest water\n  cleared      144.6        0.0    0.4   0.0\n  fallen_dry     0.0       21.4    0.2   0.0\n  forest         1.0        0.0  270.8   0.0\n  water          0.0        0.8    0.0  88.8\n                            \n Accuracy (average) : 0.9955\n\nsc_ann$validation$performance\n\nConfusion Matrix and Statistics\n\n            Reference\nPrediction   cleared fallen_dry forest water\n  cleared        206          0      1     0\n  fallen_dry       0         13      1     0\n  forest           0          0    251     0\n  water            0          0      0   156\n\nOverall Statistics\n                                          \n               Accuracy : 0.9968          \n                 95% CI : (0.9885, 0.9996)\n    No Information Rate : 0.4029          \n    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       \n                                          \n                  Kappa : 0.9952          \n                                          \n Mcnemar's Test P-Value : NA              \n\nStatistics by Class:\n\n                     Class: cleared Class: fallen_dry Class: forest\nSensitivity                  1.0000           1.00000        0.9921\nSpecificity                  0.9976           0.99837        1.0000\nPos Pred Value               0.9952           0.92857        1.0000\nNeg Pred Value               1.0000           1.00000        0.9947\nPrevalence                   0.3280           0.02070        0.4029\nDetection Rate               0.3280           0.02070        0.3997\nDetection Prevalence         0.3296           0.02229        0.3997\nBalanced Accuracy            0.9988           0.99919        0.9960\n                     Class: water\nSensitivity                1.0000\nSpecificity                1.0000\nPos Pred Value             1.0000\nNeg Pred Value             1.0000\nPrevalence                 0.2484\nDetection Rate             0.2484\nDetection Prevalence       0.2484\nBalanced Accuracy          1.0000\n\n\n결과를 지도로 나타낸다.\n\nr &lt;- as.factor(sc_ann$map)\nlevels(r) &lt;- data.frame(ID = 1:4, class_supervised = levels(train$class))\n\ntm_shape(r) + tm_raster(\n  palette = c(\"yellow\", \"sandybrown\", \"darkgreen\", \"blue\"),\n  title = \"Classes\") +\n  tm_layout(\n    legend.outside = TRUE, \n    title = \"AI-based Classification: \\n ANN\")\n\n\n\n\n\n\n\n\n14.7.5 합성곱신경망(convolution neural network, CNN)",
    "crumbs": [
      "RS 데이터의 분석 및 모델링",
      "<span class='chapter-number'>14</span>  <span class='chapter-title'>영상 분류</span>"
    ]
  },
  {
    "objectID": "4_4_change_detection.html",
    "href": "4_4_change_detection.html",
    "title": "\n15  변화 탐지\n",
    "section": "",
    "text": "15.1 개요\n필수적인 패키지를 불러온다.\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(terra)\nlibrary(tmap)\nlibrary(RStoolbox)\nlibrary(RColorBrewer)\n서울의 행정구역 바운더리 파일을 불러온다.\nseoul &lt;- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_SIDO_2023_2Q.shp\")\nseoul_gu &lt;- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_GU_2023_2Q.shp\")\nseoul_dong &lt;- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_EMD_2023_2Q.shp\")\n2024년에 촬영된 Landsat 영상과 1983년에 촬영된 Landsat 영상을 비교하고자 한다. 2024년 데이터를 불러와 마스킹한다.\nlevel2_landsat_seoul_st &lt;- rast(\"D:/My R/World Data Manupulation/USGS EarthExplorer/level2_landsat_seoul_stack.tif\")\nseoul_2024 &lt;- level2_landsat_seoul_st |&gt; \n  mask(seoul)\n1994년 데이터를 불러와 마스킹한다.\nlevel2_landsat_seoul_st_1994 &lt;- rast(\"D:/My R/World Data Manupulation/USGS EarthExplorer/level2_landsat_seoul_stack_1994.tif\")\nseoul_1994 &lt;- level2_landsat_seoul_st_1994 |&gt; \n  mask(seoul)\n1994년 데이터를 2024년에 맞게 조정한다. 미묘하게 다른 extent와 resolution을 일치시킨다.\nseoul_1994 &lt;- resample(seoul_1994, seoul_2024, method = \"bilinear\")",
    "crumbs": [
      "RS 데이터의 분석 및 모델링",
      "<span class='chapter-number'>15</span>  <span class='chapter-title'>변화 탐지</span>"
    ]
  },
  {
    "objectID": "4_4_change_detection.html#영상-대수를-활용한-변화-유무-탐지",
    "href": "4_4_change_detection.html#영상-대수를-활용한-변화-유무-탐지",
    "title": "\n15  변화 탐지\n",
    "section": "\n15.2 영상 대수를 활용한 변화 유무 탐지",
    "text": "15.2 영상 대수를 활용한 변화 유무 탐지\nNDVI를 비교하고자 한다. 2024년의 NDVI를 계산한다.\n\nNDVI_2024 &lt;- (seoul_2024$`B5(NIR)` - seoul_2024$`B4(Red)`) / (seoul_2024$`B5(NIR)` + seoul_2024$`B4(Red)`)\nnames(NDVI_2024) &lt;- \"NDVI\"\nggR(NDVI_2024)\n\n\n\n\n\n\n\n1994년의 NDVI를 계산한다.\n\nNDVI_1994 &lt;- (seoul_1994$`B4(Nir)` - seoul_1994$`B3(Red)`) / ((seoul_1994$`B4(Nir)` + seoul_1994$`B3(Red)`))\nnames(NDVI_1994) &lt;- \"NDVI\"\nqtm(NDVI_1994)\n\n\n\n\n\n\n\n둘 사이의 영상 일치도를 높이기 위해 ’영상대영상 대조 매칭(image to image contrast matching)’을 실시한다. RSToolbox 패키지의 histMatch() 함수를 활용한다.\n\nNDVI_1994_new &lt;- histMatch(NDVI_1994, NDVI_2024)\nqtm(NDVI_1994_new)\n\n\n\n\n\n\n\n2024년의 NDVI에 대한 지도를 제작한다.\n\nmy_palette &lt;- colorRampPalette(brewer.pal(11, \"RdYlGn\"))(100)\nmy_map &lt;- tm_shape(NDVI_2024, raster.downsample = FALSE) + \n  tm_raster(style = \"cont\", palette = my_palette, title = \"NDVI\", midpoint = 0) +\n  tm_shape(seoul) + tm_borders(lwd = 2, col = \"gray20\") +\n  tm_legend(legend.position = c(0.85, 0.06)) +\n  tm_layout(frame = TRUE, title = \"NDVI (2024)\", title.size = 2, \n            title.position = c(\"left\", \"top\"), bg.color = \"white\", \n            inner.margins = c(0.05, 0.05, 0.05, 0.05)) +\n  tm_scale_bar(color.dark = \"gray60\", position = c(0.01, 0.01), size = 0.6, breaks = seq(0, 20, 5)) + \n  tm_credits(\"SANG-IL LEE, Geography Education at SNU, 2025\", size = 0.7)\nmy_map\n\n\n\n\n\n\n\n1994년의 NDVI에 대한 지도를 제작한다.\n\nmy_palette &lt;- colorRampPalette(brewer.pal(11, \"RdYlGn\"))(100)\nmy_map &lt;- tm_shape(NDVI_1994_new, raster.downsample = FALSE) + \n  tm_raster(style = \"cont\", palette = my_palette, title = \"NDVI\", midpoint = 0) +\n  tm_shape(seoul) + tm_borders(lwd = 2, col = \"gray20\") +\n  tm_legend(legend.position = c(0.85, 0.06)) +\n  tm_layout(frame = TRUE, title = \"NDVI (1994)\", title.size = 2, \n            title.position = c(\"left\", \"top\"), bg.color = \"white\", \n            inner.margins = c(0.05, 0.05, 0.05, 0.05)) +\n  tm_scale_bar(color.dark = \"gray60\", position = c(0.01, 0.01), size = 0.6, breaks = seq(0, 20, 5)) + \n  tm_credits(\"SANG-IL LEE, Geography Education at SNU, 2025\", size = 0.7)\nmy_map\n\n\n\n\n\n\n\n차분을 이용해 변화를 탐지한다.\n\nNDVI_diff &lt;- NDVI_2024 - NDVI_1994_new\nqtm(NDVI_diff)\n\n\n\n\n\n\n\n표준편차를 계산한다.\n\nglobal(NDVI_diff, fun = sd, na.rm = TRUE) |&gt; round(digits = 1)\n\n      sd\nNDVI 0.1\n\n\n0.1을 임계값으로 하여 범주를 구분한다.\n\nNDVI_diff_cat &lt;- classify(\n  NDVI_diff, matrix(c(-Inf, -0.1, 1, -1, 0.1, 2, 0.1, Inf, 3), ncol = 3, byrow = TRUE))\nNDVI_diff_cat &lt;- as.factor(NDVI_diff_cat)\nqtm(NDVI_diff_cat)\n\n\n\n\n\n\n\n지도를 제작한다.\n\nmy_map &lt;- tm_shape(NDVI_diff_cat, raster.downsample = FALSE) + \n  tm_raster(style = \"cat\", \n            palette = c(\"red\", \"gray80\", \"darkgreen\"), title = \"Categories\", labels = c(\"Loss\", \"No Change\", \"Gain\")) +\n  tm_shape(seoul) + tm_borders(col = \"black\", lwd = 2) +\n  tm_legend(legend.position = c(0.87, 0.05), \n            legend.bg.color = \"white\", legend.bg.alpha = 0.6, \n            legend.title.size = 1.5, legend.text.size = 1.2) +\n  tm_layout(inner.margins = c(0.05, 0.04, 0.06, 0.04), \n            title = \"Change Detection: Vegetation\", title.size = 2,\n            title.position = c(0.02, 0.97)) + \n  tm_scale_bar(breaks = seq(0, 20, 5), text.size = 0.6, \n               color.dark = \"gray60\", position = c(0.03, 0.01)) +\n  tm_credits(text = \"SANG-IL LEE, Geography Education at SNU, 2025\",\n             size = 0.8, position = c(0.76, 0.01))\nmy_map",
    "crumbs": [
      "RS 데이터의 분석 및 모델링",
      "<span class='chapter-number'>15</span>  <span class='chapter-title'>변화 탐지</span>"
    ]
  },
  {
    "objectID": "4_4_change_detection.html#다중-시기-조합-영상-변화-탐지",
    "href": "4_4_change_detection.html#다중-시기-조합-영상-변화-탐지",
    "title": "\n15  변화 탐지\n",
    "section": "\n15.3 다중 시기 조합 영상 변화 탐지",
    "text": "15.3 다중 시기 조합 영상 변화 탐지\nPCA 조합 영상을 통해 변화 탐지를 한다. 두 시기의 Landsat으로 부터 Blue, Green, Red, NIR 밴드를 추출하고, 그것에 PCA을 적용하는 기법을 사용한다.\n\nchange_detect_PCA &lt;- c(\n  seoul_2024[[c(\"B2(Blue)\", \"B3(Green)\", \"B4(Red)\", \"B5(NIR)\")]], \n  seoul_1994[[c(\"B1(Blue)\", \"B2(Green)\", \"B3(Red)\", \"B4(Nir)\")]]\n)\n\nPCA를 적용한다.\n\nPCA_res &lt;- rasterPCA(\n  change_detect_PCA,\n  spca = TRUE\n)\nPCA_map &lt;- PCA_res$map |&gt; stretch(minv = 0, maxv = 255, minq = 0.05, maxq = 0.95)\n\nPCA 결과를 살펴본다.\n\nsnu_PCA_res_recal &lt;- function(PCA_RES){\n  res &lt;- PCA_RES\n  n &lt;- length(res$model$center)\n  recal &lt;- bind_rows(as_tibble(res$model$loadings[1:n,]), as_tibble(t(res$model$sdev)))\n  recal &lt;- recal |&gt; mutate(\n    band_id = c(str_c(\"B\", 1:(n() - 1)), \"Eigen\"), .before = 1\n    ) \n  recal[1:n, 2:(n+1)] &lt;- recal[1:n, 2:(n+1)] * recal[(n+1), 2:(n+1)][rep(1, n), ]\n  recal[(n + 1), 2:(n+1)] &lt;- recal[(n + 1), 2:(n+1)]^2\n  recal[(n + 2), 2:(n+1)] &lt;- recal[(n + 1), 2:(n+1)]*100/n\n  recal[(n + 2), 1] &lt;- \"Pct\"\n  recal[(n + 3), 2:(n+1)] &lt;- t(cumsum(as.numeric(recal[(n + 2), 2:(n+1)])))\n  recal[(n + 3), 1] &lt;- \"Cum_Pct\"\n  recal\n  }\n\nsnu_PCA_res_recal(PCA_res)\n\n# A tibble: 11 × 9\n   band_id Comp.1   Comp.2   Comp.3   Comp.4   Comp.5   Comp.6   Comp.7   Comp.8\n   &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;\n 1 B1       0.894  0.147    0.392    0.0246   0.146    0.0531   1.22e-2  1.73e-2\n 2 B2       0.902  0.207    0.368    0.00339 -0.0414  -0.0146  -5.60e-2 -6.04e-2\n 3 B3       0.908  0.171    0.358    0.0342  -0.108   -0.0394   4.39e-2  4.34e-2\n 4 B4      -0.323  0.895    0.00334 -0.309    0.00160  0.00138  4.76e-4  5.97e-3\n 5 B5       0.917 -0.0596  -0.363   -0.0601   0.0677  -0.122    2.02e-2 -1.03e-2\n 6 B6       0.912  0.0241  -0.397   -0.0118  -0.0204   0.0333  -7.99e-2  4.24e-2\n 7 B7       0.915  0.00354 -0.383   -0.0447  -0.0400   0.0901   6.03e-2 -3.12e-2\n 8 B8      -0.170  0.914   -0.228    0.288    0.00962 -0.00841  5.19e-3 -4.76e-3\n 9 Eigen    5.08   1.73     0.905    0.186    0.0415   0.0289   1.57e-2  8.76e-3\n10 Pct     63.5   21.7     11.3      2.32     0.519    0.361    1.96e-1  1.09e-1\n11 Cum_Pct 63.5   85.2     96.5     98.8     99.3     99.7      9.99e+1  1   e+2\n\n\nPCA가 생성한 이미지를 검토한다. PC4가 식생의 변화를 가장 잘 보여주는 이미지로 판단된다.\n\nqtm(PCA_map[[\"PC4\"]])\n\n\n\n\n\n\n\n표준점수로 전환한다.\n\nPC4_norm &lt;- normImage(PCA_map[[\"PC4\"]])\n\n-1과 1을 임계값으로 하여 범주를 구분한다.\n\nPC4_diff_cat &lt;- classify(\n  PC4_norm, matrix(c(-Inf, -1.5, 1, -1.5, 1.5, 2, 1.5, Inf, 3), ncol = 3, byrow = TRUE))\nPC4_diff_cat &lt;- as.factor(PC4_diff_cat)\n# qtm(PC4_diff_cat)\n\n지도를 제작한다.\n\nmy_map &lt;- tm_shape(PC4_diff_cat, raster.downsample = FALSE) + \n  tm_raster(style = \"cat\", \n            palette = c(\"red\", \"gray80\", \"darkgreen\"), title = \"Categories\", labels = c(\"Negative\", \"No Change\", \"Positive\")) +\n  tm_shape(seoul) + tm_borders(col = \"black\", lwd = 2) +\n  tm_legend(legend.position = c(0.87, 0.05), \n            legend.bg.color = \"white\", legend.bg.alpha = 0.6, \n            legend.title.size = 1.5, legend.text.size = 1.2) +\n  tm_layout(inner.margins = c(0.05, 0.04, 0.06, 0.04), \n            title = \"Change Detection: PCA\", title.size = 2,\n            title.position = c(0.02, 0.97)) + \n  tm_scale_bar(breaks = seq(0, 20, 5), text.size = 0.6, \n               color.dark = \"gray60\", position = c(0.03, 0.01)) +\n  tm_credits(text = \"SANG-IL LEE, Geography Education at SNU, 2025\",\n             size = 0.8, position = c(0.76, 0.01))\nmy_map",
    "crumbs": [
      "RS 데이터의 분석 및 모델링",
      "<span class='chapter-number'>15</span>  <span class='chapter-title'>변화 탐지</span>"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Remote Sensing",
    "section": "",
    "text": "Preface\n이것은 RS 웹북이다.",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "2_4_data_acquisition.html",
    "href": "2_4_data_acquisition.html",
    "title": "\n7  데이터의 표준과 구득\n",
    "section": "",
    "text": "7.1 데이터 표준",
    "crumbs": [
      "RS 데이터의 획득",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>데이터의 표준과 구득</span>"
    ]
  },
  {
    "objectID": "2_4_data_acquisition.html#데이터-표준",
    "href": "2_4_data_acquisition.html#데이터-표준",
    "title": "\n7  데이터의 표준과 구득\n",
    "section": "",
    "text": "7.1.1 저장 포맷\n\n7.1.2 압축 포맷\n\n7.1.3 공통 포맷\n\n7.1.4 수준\n\n7.1.5 메타 데이터",
    "crumbs": [
      "RS 데이터의 획득",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>데이터의 표준과 구득</span>"
    ]
  },
  {
    "objectID": "2_4_data_acquisition.html#데이터-공급",
    "href": "2_4_data_acquisition.html#데이터-공급",
    "title": "\n7  데이터의 표준과 구득\n",
    "section": "\n7.2 데이터 공급",
    "text": "7.2 데이터 공급\n\n7.2.1 웹사이트\n\n\nEarthExplore\n\nUSGS\nhttps://earthexplorer.usgs.gov/\nLandsat, AVHRR, SRTM, NLCD, GLCC, RADAR\n\n\n\nEarthData\n\nNASA\nhttps://www.earthdata.nasa.gov/\n\n\n\nThe Copernicus Data Space Ecosystem\n\nESA\nhttps://browser.dataspace.copernicus.eu/\n\n\n\n3DEP LidarExplorer\n\nUSGS\nhttps://apps.nationalmap.gov/lidar-explorer/\n\n\n\n7.2.2 구글 어스 엔진(Google Earth Engine)\n\nhttps://earthengine.google.com/",
    "crumbs": [
      "RS 데이터의 획득",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>데이터의 표준과 구득</span>"
    ]
  },
  {
    "objectID": "2_4_data_acquisition.html#데이터-구득",
    "href": "2_4_data_acquisition.html#데이터-구득",
    "title": "\n7  데이터의 표준과 구득\n",
    "section": "\n7.3 데이터 구득",
    "text": "7.3 데이터 구득\n\n7.3.1 구글 어스 엔진\n\n\nQGIS Plug in for Earth Engine\n\nhttps://gee-community.github.io/qgis-earthengine-plugin/\n\n\n\nrgee: Google Earth Engine for R\n\nhttps://r-spatial.github.io/rgee/#quick-start-users-guide-for-rgee\n\n\n\n\n\n7.3.2 R 패키지\n\n\nrsat\n\nhttps://docs.ropensci.org/rsat/\n\n\n\ngetSpatialData\n\nhttps://github.com/16EAGLE/getSpatialData\nLandsat, Sentinel, MODIS, SRTM\n\n\n\nCDSE: Copernicus Data Space Ecosystem API Wrapper\n\nhttps://zivankaraman.github.io/CDSE/\nSentinel\n\n\n\nopeneo: Client Interface for openEO Servers\n\nhttps://github.com/Open-EO/openeo-r-client\n\n\n\nrsi: Spectral Indices\n\nhttps://permian-global-research.github.io/rsi/\n\n\n\nrstac: R client library for STAC\n\nSpatioTemporal Asset Catalog (STAC)\nhttps://brazil-data-cube.github.io/rstac/reference/rstac.html\n\n\n\nluna: Toos for Satellite Remote Sensing (Earth Observation) Data Processing\n\nhttps://rspatial.r-universe.dev/luna/doc/manual.html",
    "crumbs": [
      "RS 데이터의 획득",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>데이터의 표준과 구득</span>"
    ]
  },
  {
    "objectID": "2_4_data_acquisition.html#landsat-data-다운로드",
    "href": "2_4_data_acquisition.html#landsat-data-다운로드",
    "title": "\n7  데이터의 표준과 구득\n",
    "section": "\n7.4 Landsat Data 다운로드",
    "text": "7.4 Landsat Data 다운로드\n\n7.4.1 STAC API를 이용한 데이터 취득 1: rstac 패키지의 활용\n원하는 지역을 설정한다. 셰이프 파일을 이용하는 방법을 정리한다.\n\nlibrary(sf)\nseoul &lt;- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_SIDO_2023_2Q.shp\")\n\nseoul_bbox &lt;- seoul |&gt; \n  st_transform(4326) |&gt; st_bbox()\n\n\n\nlibrary(tidyverse)\nlibrary(stars)\nlibrary(rstac)\nlibrary(terra)\nlibrary(tmap)\n\n# STAC API를 지정. Landsat 데이터에 대해 두 가지가 존재하는데 후자를 사용함.\n\nstac_obj &lt;- stac(\"https://landsatlook.usgs.gov/stac-server\") # 저해상도 혹은 파일이 열리지 않음.\nstac_obj &lt;- stac(\"https://planetarycomputer.microsoft.com/api/stac/v1\") # 고해상도, 그런데 Level-1은 없음\n\n# 컬렉션 내용 및 ID 확인\ncollections &lt;- stac_obj |&gt; \n  collections() |&gt; \n  get_request()\n\nmap_chr(collections$collections, \"id\") # \"landsat-c2-l1\"를 확인\n\n# 특정한 지역과 시간에 대한 검색: 6개가 확인됨\nselected_item &lt;- stac_obj |&gt; \n  stac_search(\n    collections = \"landsat-c2-l2\",  \n    bbox = seoul_bbox,\n    datetime = \"2024-08-15/2024-09-15\",\n    limit = 20\n  ) |&gt; \n  get_request()\n\n# 네 번째 것을 다운로드 하기로 결정함: 구름 조건 등을 검토할 수도 있음.\n\nitems &lt;- stac_obj |&gt; \n  stac_search(\n    collections = \"landsat-c2-l2\",  \n    bbox = seoul_bbox,\n    datetime = \"2024-08-15/2024-09-15\",\n    limit = 20\n  ) |&gt; \n  get_request()\n\nselected_item &lt;- items$features[[4]]\n\n# Assests 확인: 단순\nselected_item\n\n# Assests 확인: 복잡\nmap_dfr(items_assets(selected_item), function(key) {\n  tibble(asset = key, description = selected_item$assets[[key]]$title)\n}) |&gt; print(n = 25)\n\n# Authentication process\nselected_item &lt;- selected_item |&gt; \n   items_sign_planetary_computer()\n\n# 미리 보기\n\nselected_item$assets[[\"rendered_preview\"]]$href\nselected_item %&gt;% \n  assets_url(asset_names = \"rendered_preview\") %&gt;%\n  preview_plot()\n\n# 다운로드\n\nassets_download(selected_item, c(\"red\"), \n                output_dir = \"D:/My R/World Data Manupulation/stac/\")\n\nB4 &lt;- file.path(\n  \"D:/My R/World Data Manupulation/stac/\",\n  \"landsat-c2\",\n  \"level-2\",\n  \"standard\",\n  \"oli-tirs\",\n  \"2024\",\n  \"116\", \n  \"034\",\n  \"LC08_L2SP_116034_20240829_20240905_02_T1\",\n  \"LC08_L2SP_116034_20240829_20240905_02_T1_SR_B4.tif\"\n) |&gt; rast()\n\nlandsat_image &lt;- c(B2, B3, B4)\nnames(landsat_image) &lt;- c(\"B2\", \"B3\", \"B4\")\n\nseoul_crs &lt;- \"+proj=tmerc +lat_0=38 +lon_0=127.5 +k=0.9996 +x_0=1000000 +y_0=2000000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs\"\n\nlandsat_image_seoul &lt;- landsat_image |&gt; \n  project(seoul_crs) |&gt; crop(seoul)\n\nlandsat_image_seoul_mask &lt;- landsat_image_seoul |&gt; \n  mask(seoul)\n\nplotRGB(landsat_image_seoul_mask, r = \"B4\", g = \"B3\", b = \"B2\", stretch = \"lin\")\n\nlandsat_image_seoul_mask_str &lt;- \n  stretch(landsat_image_seoul_mask, minv = 0, maxv = 255, minq = 0.1, maxq = 0.95)\n\ntm_shape(landsat_image_seoul_mask_str, raster.downsample = FALSE) + \n  tm_rgb(r = 3, g = 2, b = 1) + \n  tm_shape(seoul) + tm_borders(lwd = 2, col = \"gray20\")\n\nLandsat의 Level-1 데이터를 USGS의 STAC API를 통해 다운로드한다.\n\nstac_obj &lt;- stac(\"https://landsatlook.usgs.gov/stac-server\")\n\ncollections &lt;- stac_obj |&gt; \n  collections() |&gt; \n  get_request()\n\nmap_chr(collections$collections, \"id\")\n\n# landsat-c2l1: Level-1 data\n\nitems &lt;- stac_obj |&gt; \n  stac_search(\n    collections = \"landsat-c2l1\",  \n    bbox = seoul_bbox,\n    datetime = \"2024-08-29T00:00:00Z/2024-08-29T23:59:59Z\",\n    limit = 5\n  ) |&gt; \n  get_request() |&gt; \n  items_sign_planetary_computer()\n\nselected_item &lt;- items$features[[1]]\n\nselected_item$assets$blue |&gt; preview_plot()\n\nselected_item$assets[[\"rendered_preview\"]]$href\nselected_item %&gt;% \n  assets_url(asset_names = \"thumbnail\") %&gt;%\n  preview_plot()\n\nassets_download(selected_item, c(\"red\"), output_dir = \"D:/R_Classes/2025_1_RS/\", overwrite = TRUE)\n\n# 다운로드는 되지만 파일의 크기가 작음.\n\n\n7.4.2 STAC API를 이용한 데이터 취득 1: rsi 패키지의 활용\n빠르고 crop이 이루어진다는 점에서 편리하지만 해상도가 떨어짐.\n\nlibrary(rsi)\n\nseoul &lt;- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_SIDO_2023_2Q.shp\")\naoi &lt;- seoul \n\nlandsat_image_2024 &lt;- get_landsat_imagery(\n  aoi,\n  start_date = \"2024-08-15\",\n  end_date = \"2024-09-15\",\n  output_filename = tempfile(fileext = \".tif\")\n)\n\nseoul_2024 &lt;- rast(landsat_image_2024)\n\nplotRGB(seoul_2024, r = \"R\", g = \"G\", b = \"B\", stretch = \"lin\")",
    "crumbs": [
      "RS 데이터의 획득",
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>데이터의 표준과 구득</span>"
    ]
  }
]