{
  "hash": "c7a1c6acc0585a4490c089717e7cf57c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"영상 합성\"\nauthor: Sang-Il Lee\ndate-modified: last-modified\nnumber-sections: true\nformat: \n  html: \n    toc: true\ncode-link: true\ncode-copy: true\nlightbox: true\nexecute: \n  warning: false\n  error: false\n  freeze: auto\neditor: visual\neditor_options: \n  chunk_output_type: console\n---\n\n\n## 고해상도 컬러 영상 합성\n\n필수적인 패키지를 설치한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(tmap)\nlibrary(terra)\nlibrary(RStoolbox)\n```\n:::\n\n\n서울의 행정구역 바운더리 파일을 불러온다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nseoul <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_SIDO_2023_2Q.shp\")\nseoul_gu <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_GU_2023_2Q.shp\")\nseoul_dong <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2023_2Q/SEOUL_EMD_2023_2Q.shp\")\n```\n:::\n\n\nLevel-1 데이터를 불러와 마스킹한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlevel1_landsat_seoul_st_30 <- rast(\"D:/My R/World Data Manupulation/USGS EarthExplorer/level1_landsat_seoul_stack_30_2024.tif\")\nlevel1_landsat_seoul_st_30_mask <- level1_landsat_seoul_st_30 |> \n  mask(seoul)\nlevel1_landsat_seoul_st_15 <- rast(\"D:/My R/World Data Manupulation/USGS EarthExplorer/level1_landsat_seoul_stack_15_2024.tif\")\nlevel1_landsat_seoul_st_15_mask <- level1_landsat_seoul_st_15 |> \n  mask(seoul)\n```\n:::\n\n\n대비확장을 시행한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlevel1_landsat_seoul_st_30_mask_str <- level1_landsat_seoul_st_30_mask |> \n  stretch(minv = 0, maxv = 255, minq = 0.05, maxq = 0.95)\nlevel1_landsat_seoul_st_15_mask_str <- level1_landsat_seoul_st_15_mask |> \n  stretch(minv = 0, maxv = 255, minq = 0.05, maxq = 0.95)\npanchrom <- level1_landsat_seoul_st_15_mask_str\n```\n:::\n\n\n기본적인 천연컬러 영상을 생성한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_map <- tm_shape(level1_landsat_seoul_st_30_mask_str, \n                   raster.downsample = FALSE) + \n  tm_rgb(r = 4, g = 3, b = 2, legend.show = FALSE) +\n  tm_shape(seoul) + tm_borders(lwd = 2, col = \"gray20\") +\n  tm_layout(frame = TRUE, title = \"Natural Color\", \n            title.size = 2, title.position = c(\"left\", \"top\"), \n            bg.color = \"white\", \n            inner.margins = c(0.05, 0.05, 0.05, 0.05)) +\n  tm_scale_bar(color.dark = \"gray60\", position = c(0.01, 0.01), \n               text.size = 0.6, breaks = seq(0, 20, 5)) + \n  tm_credits(\"SANG-IL LEE, Geography Education at SNU, 2025\", \n             size = 0.7)\nmy_map\n```\n\n::: {.cell-output-display}\n![](4_2_image_composite_files/figure-html/unnamed-chunk-5-1.png){width=4500}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n### RGB-IHS 변환\n\n[`RStoolbox`](https://bleutner.github.io/RStoolbox/) 패키지의 `panSharpen()` 함수를 이용하여 RGB-IHS 변환을 시행한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npanchrom <- level1_landsat_seoul_st_15_mask_str\npan_ihs <- panSharpen(\n  level1_landsat_seoul_st_30_mask_str, \n  panchrom, \n  r = 4, g = 3, b = 2,\n  method = \"ihs\"\n)\n```\n:::\n\n\n변환의 결과를 지도로 나타낸다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_map <- tm_shape(pan_ihs, \n                   raster.downsample = FALSE) + \n  tm_rgb(r = 3, g = 2, b = 1, legend.show = FALSE) +\n  tm_shape(seoul) + tm_borders(lwd = 2, col = \"gray20\") +\n  tm_layout(frame = TRUE, title = \"RGB-IHS Transformation\", \n            title.size = 2, title.position = c(\"left\", \"top\"), \n            bg.color = \"white\", \n            inner.margins = c(0.05, 0.05, 0.05, 0.05)) +\n  tm_scale_bar(color.dark = \"gray60\", position = c(0.01, 0.01), \n               text.size = 0.6, breaks = seq(0, 20, 5)) + \n  tm_credits(\"SANG-IL LEE, Geography Education at SNU, 2025\", \n             size = 0.7)\nmy_map\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n### 브로비(Brovey) 변환\n\n브로비 변환을 실시한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npan_brovey <- panSharpen(\n  level1_landsat_seoul_st_30_mask_str, \n  panchrom, \n  r = 4, g = 3, b = 2,\n  method = \"brovey\"\n)\n```\n:::\n\n\n변환의 결과를 지도로 나타낸다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_map <- tm_shape(pan_brovey, \n                   raster.downsample = FALSE) + \n  tm_rgb(r = 3, g = 2, b = 1, legend.show = FALSE) +\n  tm_shape(seoul) + tm_borders(lwd = 2, col = \"gray20\") +\n  tm_layout(frame = TRUE, title = \"Brovey Transformation\", \n            title.size = 2, title.position = c(\"left\", \"top\"), \n            bg.color = \"white\", \n            inner.margins = c(0.05, 0.05, 0.05, 0.05)) +\n  tm_scale_bar(color.dark = \"gray60\", position = c(0.01, 0.01), \n               text.size = 0.6, breaks = seq(0, 20, 5)) + \n  tm_credits(\"SANG-IL LEE, Geography Education at SNU, 2025\", \n             size = 0.7)\nmy_map\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n### PCA 변환\n\nPCA 변환을 실시한다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npan_pca <- panSharpen(\n  level1_landsat_seoul_st_30_mask_str, \n  panchrom, \n  method = \"pca\"\n)\n```\n:::\n\n\n변환의 결과를 지도로 나타낸다.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_map <- tm_shape(pan_pca, \n                   raster.downsample = FALSE) + \n  tm_rgb(r = 4, g = 3, b = 2, legend.show = FALSE) +\n  tm_shape(seoul) + tm_borders(lwd = 2, col = \"gray20\") +\n  tm_layout(frame = TRUE, title = \"PCA Transformation\", \n            title.size = 2, title.position = c(\"left\", \"top\"), \n            bg.color = \"white\", \n            inner.margins = c(0.05, 0.05, 0.05, 0.05)) +\n  tm_scale_bar(color.dark = \"gray60\", position = c(0.01, 0.01), \n               text.size = 0.6, breaks = seq(0, 20, 5)) + \n  tm_credits(\"SANG-IL LEE, Geography Education at SNU, 2025\", \n             size = 0.7)\nmy_map\n```\n\n::: {.cell-output-display}\n![](4_2_image_composite_files/figure-html/unnamed-chunk-14-1.png){width=4500}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n## 시계열 영상 합성\n\n## 이종 센서 데이터의 융합\n",
    "supporting": [
      "4_2_image_composite_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}